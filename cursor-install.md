# Инструкция по интеграции MCP-сервера с Cursor IDE

Пошаговая инструкция по установке и настройке MCP-сервера для работы с Cursor IDE.

## Шаг 1: Установка зависимостей

Убедитесь, что у вас установлен Node.js (версия 18 или выше), затем выполните:

```bash
npm install
```

Это установит все необходимые зависимости, включая MCP SDK.

## Шаг 2: Сборка проекта

Скомпилируйте TypeScript код в JavaScript:

```bash
npm run build
```

После успешной сборки в директории `dist/` появятся скомпилированные файлы.

## Шаг 3: Добавление конфигурации в Cursor

### Вариант A: Использование локального mcp.json

1. Убедитесь, что файл `mcp.json` находится в корне проекта
2. Откройте настройки Cursor IDE
3. Перейдите в раздел **Settings** → **MCP Servers** (или **Features** → **MCP**)
4. Cursor автоматически обнаружит `mcp.json` в корне проекта

### Вариант B: Ручная настройка через Settings

1. Откройте настройки Cursor IDE (Ctrl+, или Cmd+,)
2. Перейдите в раздел **Features** → **MCP** (или **Settings** → **MCP Servers**)
3. Нажмите **Add Server** или **+**
4. Добавьте следующую конфигурацию:

```json
{
  "name": "context-tools-mcp",
  "command": "node",
  "args": ["dist/index.js"],
  "cwd": "/absolute/path/to/your/project"
}
```

**Важно:** Замените `/absolute/path/to/your/project` на абсолютный путь к вашему проекту.

### Вариант C: Глобальная конфигурация

Если вы хотите использовать сервер для всех проектов:

1. Найдите файл конфигурации MCP в Cursor (обычно в `~/.cursor/mcp.json` или в настройках пользователя)
2. Добавьте конфигурацию сервера:

```json
{
  "mcpServers": {
    "context-tools-mcp": {
      "command": "node",
      "args": ["/absolute/path/to/project/dist/index.js"],
      "cwd": "/absolute/path/to/project"
    }
  }
}
```

## Шаг 4: Перезагрузка Cursor IDE

После добавления конфигурации:

1. Перезагрузите Cursor IDE (закройте и откройте заново, или используйте команду **Reload Window**)
2. Это необходимо для загрузки нового MCP-сервера

## Шаг 5: Проверка доступности tools

После перезагрузки проверьте, что tools доступны:

1. Откройте чат в Cursor IDE
2. Попробуйте использовать один из tools, например:
   - "Найди документацию по API"
   - "Покажи структуру проекта"
   - "Найди файлы с функцией calculate"

3. Если tools работают, вы увидите результаты в ответе AI

### Альтернативный способ проверки:

1. Откройте Developer Tools в Cursor (View → Developer Tools)
2. В консоли проверьте, нет ли ошибок подключения к MCP-серверу
3. Проверьте логи в файле `logs/mcp-calls.log` - должны появиться записи о вызовах tools

## Устранение неполадок

### Сервер не запускается

1. **Проверьте путь к Node.js:**
   - Убедитесь, что `node` доступен в PATH
   - В Windows может потребоваться полный путь: `C:\\Program Files\\nodejs\\node.exe`

2. **Проверьте путь к скомпилированному файлу:**
   - Убедитесь, что файл `dist/index.js` существует
   - Если нет, выполните `npm run build`

3. **Проверьте права доступа:**
   - Убедитесь, что у процесса есть права на чтение файлов проекта

### Tools не появляются в Cursor

1. **Проверьте конфигурацию:**
   - Убедитесь, что `mcp.json` правильно настроен
   - Проверьте, что пути указаны абсолютно (не относительно)

2. **Проверьте логи:**
   - Откройте `logs/mcp-calls.log` и проверьте наличие ошибок
   - Проверьте консоль Developer Tools в Cursor

3. **Перезапустите сервер:**
   - Закройте и откройте Cursor IDE заново
   - Убедитесь, что нет других процессов, использующих порт/stdio

### Ошибки доступа к файлам

1. **Проверьте ограничения доступа:**
   - Убедитесь, что файлы не находятся в исключенных директориях (node_modules, .git и т.д.)
   - Проверьте, что файлы не содержат чувствительных данных (см. README.md)

2. **Проверьте права доступа:**
   - Убедитесь, что у процесса есть права на чтение файлов проекта

## Дополнительная информация

- Подробное описание tools см. в [README.md](./README.md)
- Ограничения доступа описаны в разделе "Ограничения доступа" в README.md
- Логи находятся в директории `logs/`

## Поддержка

При возникновении проблем:
1. Проверьте логи в `logs/mcp-calls.log`
2. Проверьте консоль Developer Tools в Cursor
3. Убедитесь, что все зависимости установлены и проект собран
